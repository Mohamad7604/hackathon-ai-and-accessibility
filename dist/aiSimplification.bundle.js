new class{constructor(){this.apiKey="sk-753ecae759d8455ebd44420ed9707d64",this.addSimplifyButton(),this.observeDocumentChanges()}observeDocumentChanges(){new MutationObserver((e=>{document.getElementById("readable-simplify")||this.addSimplifyButton()})).observe(document.body,{childList:!0,subtree:!0})}addSimplifyButton(){const e=document.getElementById("readable-simplify");e&&e.remove();const t=document.createElement("button");t.id="readable-simplify",t.textContent="Simplify Text",t.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10000;\n            padding: 10px 20px;\n            background: #3498db;\n            color: white;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-family: Arial, sans-serif;\n            font-size: 14px;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n        ",t.addEventListener("click",(()=>this.simplifyContent())),document.body.appendChild(t)}extractMainContent(){const e=document.querySelector("article")||document.querySelector("main")||document.querySelector(".content");if(e)return e.innerText;let t=0,n="";return document.querySelectorAll("p, article, section, div").forEach((e=>{e.innerText.length>t&&(t=e.innerText.length,n=e.innerText)})),n}async simplifyContent(){const e=this.extractMainContent();if(!e)return void alert("No main content found to simplify.");const t=this.showLoadingState();try{const t=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"user",content:`Simplify this text for dyslexia by:\n                        1. Breaking down complex sentences\n                        2. Using simpler words\n                        3. Adding bold formatting to key terms\n                        4. Maintaining the original meaning\n                        Text: ${e}`}],temperature:.3,max_tokens:4e3,stop:null})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();if(console.log("API Response:",n),n.error)throw new Error(`API Error: ${n.error.message}`);if(!n.choices||!n.choices[0]||!n.choices[0].message)throw console.error("Unexpected API response:",n),new Error("Invalid API response structure");const o=n.choices[0].message.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br>").trim();if(!o)throw new Error("Empty response from API");this.replaceContent(o)}catch(e){console.error("Simplification failed:",e),alert(`Failed to simplify text: ${e.message}`)}finally{t.remove()}}showLoadingState(){const e=document.createElement("div");return e.id="readable-loader",e.style.cssText="\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            background: rgba(0,0,0,0.8);\n            color: white;\n            padding: 20px;\n            border-radius: 5px;\n            z-index: 10001;\n            font-family: Arial, sans-serif;\n        ",e.textContent="Simplifying text...",document.body.appendChild(e),e}replaceContent(e){const t=document.querySelector("article")||document.querySelector("main")||document.querySelector(".content");if(t)t.innerHTML=e;else{const t=document.createElement("div");t.innerHTML=e,document.body.innerHTML=t.innerHTML}}};
//# sourceMappingURL=aiSimplification.bundle.js.map