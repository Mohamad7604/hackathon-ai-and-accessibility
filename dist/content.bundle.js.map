{"version":3,"file":"content.bundle.js","mappings":"AAwEA,IAtEA,MACI,WAAAA,GACIC,KAAKC,kBACLD,KAAKE,sBACLF,KAAKG,sBACT,CAEA,qBAAMF,GACF,IACI,MAAMG,EAAW,IAAIC,SAAS,eAC1B,OAAOC,OAAOC,QAAQC,OAAO,yDAE3BJ,EAASK,OACfC,SAASC,MAAMC,IAAIR,EACvB,CAAE,MAAOS,GACLC,QAAQD,MAAM,oCAAqCA,EACvD,CACJ,CAEA,oBAAAV,GACIG,OAAOC,QAAQQ,UAAUC,aAAY,CAACC,EAASC,EAAQC,KAC9B,iBAAjBF,EAAQG,MACRpB,KAAKqB,YAAYJ,EAAQK,WAEtB,IAEf,CAEA,yBAAMpB,GACF,MAAMqB,QAAoBjB,OAAOkB,QAAQC,KAAKC,IAAI,CAC9CC,WAAY,QACZC,cAAe,EACfC,WAAY,IACZC,MAAO,YAEX9B,KAAKqB,YAAYE,EACrB,CAEA,WAAAF,CAAYC,GACR,MAAMS,EAAgBrB,SAASsB,eAAe,mBAC1CD,GACAA,EAAcE,SAGlB,MAAMC,EAAQxB,SAASyB,cAAc,SACrCD,EAAME,GAAK,kBACXF,EAAMG,YAAc,6FAEIf,EAASK,4DACPL,EAASM,6DACZN,EAASO,kDAIT,UAAnBP,EAASQ,QACTI,EAAMG,aAAe,gQAWzB3B,SAAS4B,KAAKC,YAAYL,EAC9B","sources":["webpack://readable-browser-extension/./textCustomization.js"],"sourcesContent":["// This file implements the text customization module, dynamically injecting CSS to modify fonts, letter/line spacing, and background/text colors.\r\n\r\nclass TextCustomizer {\r\n    constructor() {\r\n        this.initializeFonts();\r\n        this.loadUserPreferences();\r\n        this.setupMessageListener();\r\n    }\r\n\r\n    async initializeFonts() {\r\n        try {\r\n            const fontFace = new FontFace('OpenDyslexic', \r\n                `url(${chrome.runtime.getURL('fonts/OpenDyslexic/OpenDyslexic-Regular.otf')})`\r\n            );\r\n            await fontFace.load();\r\n            document.fonts.add(fontFace);\r\n        } catch (error) {\r\n            console.error('Failed to load OpenDyslexic font:', error);\r\n        }\r\n    }\r\n\r\n    setupMessageListener() {\r\n        chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n            if (request.type === 'updateStyles') {\r\n                this.applyStyles(request.settings);\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n\r\n    async loadUserPreferences() {\r\n        const preferences = await chrome.storage.sync.get({\r\n            fontFamily: 'Arial',\r\n            letterSpacing: 0,\r\n            lineHeight: 1.5,\r\n            theme: 'default'\r\n        });\r\n        this.applyStyles(preferences);\r\n    }\r\n\r\n    applyStyles(settings) {\r\n        const existingStyle = document.getElementById('readable-styles');\r\n        if (existingStyle) {\r\n            existingStyle.remove();\r\n        }\r\n\r\n        const style = document.createElement('style');\r\n        style.id = 'readable-styles';\r\n        style.textContent = `\r\n            body, p, div, span, h1, h2, h3, h4, h5, h6 {\r\n                font-family: \"${settings.fontFamily}\" !important;\r\n                letter-spacing: ${settings.letterSpacing}px !important;\r\n                line-height: ${settings.lineHeight} !important;\r\n            }\r\n        `;\r\n\r\n        if (settings.theme === 'night') {\r\n            style.textContent += `\r\n                body {\r\n                    background-color: #1a1a1a !important;\r\n                    color: #ffffff !important;\r\n                }\r\n                a {\r\n                    color: #66b3ff !important;\r\n                }\r\n            `;\r\n        }\r\n\r\n        document.head.appendChild(style);\r\n    }\r\n}\r\n\r\nnew TextCustomizer();"],"names":["constructor","this","initializeFonts","loadUserPreferences","setupMessageListener","fontFace","FontFace","chrome","runtime","getURL","load","document","fonts","add","error","console","onMessage","addListener","request","sender","sendResponse","type","applyStyles","settings","preferences","storage","sync","get","fontFamily","letterSpacing","lineHeight","theme","existingStyle","getElementById","remove","style","createElement","id","textContent","head","appendChild"],"sourceRoot":""}